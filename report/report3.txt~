1. we have 2 semaphore produced(sp) and consumed(sc), at the first, the consumer will wait to be woken, while the producer produces the number until the queue is full. Then producer signals to sc to wake consumer and wait until the consumer consumes the whole queue. After consumer consumed all the numbers in the queue, it signals to sp to wake producer and wait until producer refills the queue again. In this way, the synchronization is achieved.

2. Yes. For producer and consumer, they hold the semaphore s at the same time. In the beginning, consumer wait the semaphore. Producer produces to fill the queue. After queue is full, producer signals to the semaphore and it waits on the semaphore s. This wakes consumer. After waken, consumer consumes the whole queue until queue is empty. Then it signals the semaphore to wake the producer and it waits on the semaphore, so on and so on. This is how one semaphore provide synchronization.
